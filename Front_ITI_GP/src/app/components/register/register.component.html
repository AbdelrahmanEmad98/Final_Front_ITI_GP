<div class="container">
  <div class="row">
    <div class="col-lg-12">
      <h1>Create Account</h1>
      <div class="card mb-2">
        <div class="card-body">

          <form class="row g-3 needs-validation" [formGroup]="validFrm" (ngSubmit)="AddNewCustomer()">

            <div class="col-md-4">
              <label for="fname" class="form-label">First name</label>
              <input #fname formControlName="fname" (keypress)="keyPressMinLength($event,15)" type="text"
                class="form-control" id="fname" placeholder="First Name" required>
              <div class="form-control-feedback"
                *ngIf="validFrm.get('fname')?.errors && (validFrm.get('fname')?.dirty || validFrm.get('fname')?.touched)">
                <p *ngIf="validFrm?.get('fname')?.errors?.['required']" class="text-danger">First name is required</p>
                <p *ngIf="validFrm?.get('fname')?.errors?.['minlength']" class="text-danger">First name must be more
                  than 3 letters</p>
              </div>
            </div>

            <div class="col-md-4">
              <label for="mname" class="form-label">Middle name</label>
              <input [(ngModel)]="mname" (keypress)="keyPressMinLength($event,15)" type="text" class="form-control"
                id="mname" placeholder="Middle Name">
            </div>

            <div class="col-md-4">
              <label for="lname" class="form-label">Last name</label>
              <input #lname formControlName="lname" (keypress)="keyPressMinLength($event,15)" type="text"
                class="form-control" id="lname" placeholder="Last name" required>
              <div class="form-control-feedback"
                *ngIf="validFrm.get('lname')?.errors && (validFrm.get('lname')?.dirty || validFrm.get('lname')?.touched)">
                <p *ngIf="validFrm?.get('lname')?.errors?.['required']" class="text-danger">Last name is required</p>
                <p *ngIf="validFrm?.get('lname')?.errors?.['minlength']" class="text-danger">Last name must be more than
                  3 letters</p>
              </div>
            </div>

            <!-- =================================================== -->

            <div class="col-md-6">
              <label for="phonenumber" class="form-label">Phone number</label>
              <input #phonenumber formControlName="phonenumber" (keypress)="keyPressNumbers($event,25)" type="text"
                class="form-control" id="phonenumber" placeholder="Phone number" required>
              <div class="form-control-feedback"
                *ngIf="validFrm.get('phonenumber')?.errors && (validFrm.get('phonenumber')?.dirty || validFrm.get('phonenumber')?.touched)">
                <p *ngIf="validFrm?.get('phonenumber')?.errors?.['required']" class="text-danger">Phone number is
                  required</p>
                <p *ngIf="validFrm?.get('phonenumber')?.errors?.['minlength']" class="text-danger">Phone number must be
                  more than 8 Numbers</p>
              </div>
            </div>

            <div class="col-md-6">
              <label for="country" class="form-label">Country</label>
              <select [(ngModel)]="selectedCountry" #country formControlName="country" class="form-select" id="country"
                placeholder="Country" required>
                <option *ngFor="let country of Countries" [ngValue]="Countries.indexOf(country)">{{country}}</option>
              </select>
              <div class="form-control-feedback"
                *ngIf="validFrm.get('country')?.errors && (validFrm.get('country')?.dirty || validFrm.get('country')?.touched)">
                <p *ngIf="validFrm?.get('country')?.errors?.['required']" class="text-danger">Country is required</p>
              </div>
            </div>

            <!-- =================================================== -->

            <div class="col-md-6">
              <label for="city" class="form-label">City</label>
              <input #city formControlName="city" (keypress)="keyPressMinLength($event,15)" type="text"
                class="form-control" id="city" placeholder="City" required>
              <div class="form-control-feedback"
                *ngIf="validFrm.get('city')?.errors && (validFrm.get('city')?.dirty || validFrm.get('city')?.touched)">
                <p *ngIf="validFrm?.get('city')?.errors?.['required']" class="text-danger">City is required</p>
                <p *ngIf="validFrm?.get('city')?.errors?.['minlength']" class="text-danger">City must be more than 3
                  letters</p>
              </div>
            </div>


            <div class="col-md-6">
              <label for="street" class="form-label">Street</label>
              <input #street formControlName="street" (keypress)="keyPressMinLength($event,20)" type="text"
                class="form-control" id="street" placeholder="Street" required>
              <div class="form-control-feedback"
                *ngIf="validFrm.get('street')?.errors && (validFrm.get('street')?.dirty || validFrm.get('street')?.touched)">
                <p *ngIf="validFrm?.get('street')?.errors?.['required']" class="text-danger">Street is required</p>
                <p *ngIf="validFrm?.get('street')?.errors?.['minlength']" class="text-danger">Street must be more than
                  3 letters</p>
              </div>
            </div>

            <!-- =================================================== -->

            <div class="col-md-6">
              <label for="email" class="form-label">Email</label>
              <input #email formControlName="email" (keypress)="keyPressMinLength($event,35)" type="email"
                class="form-control" id="email" placeholder="Email" required>
              <div class="form-control-feedback"
                *ngIf="validFrm.get('email')?.errors && (validFrm.get('email')?.dirty || validFrm.get('email')?.touched)">
                <p *ngIf="validFrm?.get('email')?.errors?.['required']" class="text-danger">Email is required</p>
                <p *ngIf="validFrm?.get('email')?.errors?.['pattern']" class="text-danger">Invalid Email</p>
              </div>
            </div>


            <div class="col-md-6">

              <label for="password" class="form-label">Password</label>
              <div class="input-group">
                <input #password formControlName="password" (keypress)="keyPressMinLength($event,50)"
                  type="{{ showPassword ? 'text':'password' }}" class="form-control" id="password"
                  placeholder="Password" required>

                <span class="input-group-text" (click)="togglePassword()">
                  <i [ngClass]="showPassword ? 'fa fa-eye':'fa fa-eye-slash'" id="togglePassword"></i>
                </span>
              </div>
              <div class="form-control-feedback"
                *ngIf="validFrm.get('password')?.errors && (validFrm.get('password')?.dirty || validFrm.get('password')?.touched)">
                <p *ngIf="validFrm?.get('password')?.errors?.['required']" class="text-danger">password is required</p>
                <p *ngIf="validFrm?.get('password')?.errors?.['minlength']" class="text-danger">password must have
                  length more than 7</p>
              </div>
            </div>


            <div class="col-12 text-end">
              <button class="btn btn-primary" type="submit">Submit</button>
            </div>
          </form>

        </div>
      </div>
    </div>
  </div>
</div>

<div class="modal" tabindex="-1" role="dialog" [ngClass]="displayAlert">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title"> {{ FlagError ? 'Alert' : 'Done' }}</h4>
      </div>
      <div class="modal-body">
        {{ message }}
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-warning" (click)="closePopup()">
          Close
        </button>
      </div>
    </div>
  </div>
</div>
